# DARWIN PBPK-PLATFORM - AGENT RULES

## üß† CONTEXTO DO REPO

**Tipo:** Plataforma PBPK (Physiologically-Based Pharmacokinetic)
**Foco:** Modelagem farmacocin√©tica fisiol√≥gica integrada com biomateriais
**Conex√µes:** kec-biomaterials (scaffolds), darwin-core (base comum)

---

## üìã WORKFLOW OBRIGAT√ìRIO

### ANTES DE AGIR:
1. Executar: `~/.darwin-global/darwin-omniscient-agent.sh`
2. Ler SYNC_STATE.json (verificar locks e agentes ativos)
3. Verificar Darwin RAG++ (mem√≥rias do projeto)
4. N√ÉO fazer web_search sem consultar c√≥digo/mem√≥rias primeiro

### AO PESQUISAR:
1. **Primeiro:** Darwin RAG++ (mem√≥rias do projeto)
2. **Segundo:** Codebase existente (11,283 chunks indexados)
3. **Terceiro:** Papers via Semantic Scholar API
4. **√öLTIMO RECURSO:** web_search (apenas papers 2024/2025)

---

## üîç QUANDO USAR WEB SEARCH

### ‚úÖ PERMITIDO:
- Papers PBPK de 2024/2025 n√£o indexados
- M√©todos farmacocin√©ticos recentes (< 6 meses)
- Guidelines regulat√≥rias atualizadas (FDA, EMA)
- Novos modelos fisiol√≥gicos

### ‚ùå PROIBIDO:
- Conceitos b√°sicos PBPK (j√° na codebase)
- Papers antigos (j√° indexados)
- C√≥digo que pode ser consultado localmente
- Perguntas sobre scaffolds (consulte kec-biomaterials)

---

## üéØ ESPECIALIDADE DESTE REPO

### PBPK Modeling:
- Compartmental models (absor√ß√£o, distribui√ß√£o, metabolismo, excre√ß√£o)
- Integration com biomateriais porosos
- Drug release kinetics de scaffolds
- Tissue-specific pharmacokinetics
- Scaffold degradation ‚Üí drug release

### Computational:
- ODE solvers para PBPK
- Parameter estimation (Bayesian, MCMC)
- Sensitivity analysis
- Monte Carlo simulations
- GPU acceleration para simula√ß√µes

### Regulatory:
- FDA guidelines compliance
- EMA standards
- Q1 scientific rigor
- Reproducibilidade total

---

## üîó INTEGRA√á√ÉO MULTI-REPO

### Compartilha com:
- **kec-biomaterials:** Scaffold properties (porosity, pore size, degradation)
- **darwin-core:** Base comum (database, GPU utils, metrics)
- **pcs-meta-repo:** An√°lise de coer√™ncia em modelos PBPK

### Dados compartilhados:
- Par√¢metros fisiol√≥gicos
- Propriedades de biomateriais
- Drug release profiles
- Valida√ß√£o experimental

---

## üìù SALVAR DESCOBERTAS

### Sempre use `update_memory` para:
- Novos modelos PBPK validados
- Par√¢metros otimizados
- Insights sobre drug release de scaffolds
- Valida√ß√µes experimentais
- Compara√ß√µes com literatura
- Bugs/solu√ß√µes importantes

### Tags √∫teis:
- `pbpk-model`, `drug-release`, `scaffold-integration`
- `parameter-estimation`, `validation`, `regulatory`

---

## üöÄ CLUSTER

**Namespace:** darwin-pbpk (15% quota)
**Recursos:** 8 cores, 64Gi RAM, 0.3 GPU
**Prioridade:** medium

### Usar darwin-cluster CLI:
```bash
# Submeter simula√ß√£o PBPK
darwin-cluster submit --job analysis --script pbpk_simulation.py

# Ver fila
darwin-cluster queue status

# Alterar prioridade
darwin-cluster queue priority <job-id> high
```

---

## üß™ PADR√ÉO Q1 CIENT√çFICO

### HONESTIDADE CIENT√çFICA (OBRIGAT√ìRIA):
- ‚úÖ NUNCA reivindicar "validado" sem dados experimentais
- ‚úÖ SEMPRE distinguir "modelo implementado" vs "modelo validado"
- ‚úÖ SEMPRE incluir limita√ß√µes do modelo
- ‚úÖ SEMPRE incluir incertezas nos par√¢metros
- ‚úÖ Usar qualificadores: "estimado", "esperado", "pendente valida√ß√£o"

### Exemplo ERRADO:
‚ùå "Implementamos modelo PBPK validado para drug release"

### Exemplo CORRETO:
‚úÖ "Implementamos modelo PBPK para drug release. Par√¢metros estimados de literatura.
   Valida√ß√£o experimental pendente com dados de scaffold X."

---

## üîß COMANDOS √öTEIS

### Ver estado multi-repo:
```bash
~/.darwin-global/darwin-omniscient-agent.sh
```

### Buscar mem√≥rias PBPK:
```bash
grep -r "pbpk\|drug-release" ~/.darwin-sync/memories/
```

### Ver jobs rodando:
```bash
darwin-cluster status --namespace darwin-pbpk
```

### Testar modelo PBPK:
```bash
cd /home/agourakis82/workspace/darwin-pbpk-platform
python -m pytest tests/ -v
```

---

## üìä M√âTRICAS IMPORTANTES

### Valida√ß√£o de Modelos:
- MAPE (Mean Absolute Percentage Error) < 15%
- R¬≤ > 0.95 para curvas drug release
- Residuals normalmente distribu√≠dos
- Sensitivity analysis completa

### Performance:
- Simula√ß√µes Monte Carlo: < 5min (1000 samples)
- Parameter estimation: < 30min (MCMC)
- GPU acceleration: > 10x speedup vs CPU

---

## üéì PAPERS CHAVE (no contexto)

- Compartmental PBPK models (Rowland & Tozer)
- Drug release from porous scaffolds (Baker et al)
- Bayesian parameter estimation (Gelman)
- FDA PBPK guidance (2018, 2020)

---

## ‚ö†Ô∏è AVISOS

1. **N√ÉO misturar c√≥digo PBPK com biomaterials**
   - PBPK ‚Üí este repo
   - Scaffolds ‚Üí kec-biomaterials
   - Integra√ß√£o ‚Üí via API/database

2. **SEMPRE validar unidades**
   - Concentra√ß√µes: mg/L ou ŒºM
   - Volumes: L (n√£o mL!)
   - Taxas: 1/h (n√£o 1/min!)

3. **Git commits espec√≠ficos**
   - Commits v√£o para darwin-pbpk-platform
   - N√£o misturar com outros repos

4. **Namespace isolado**
   - Jobs v√£o para darwin-pbpk namespace
   - N√£o interferem com kec-biomaterials

---

## üîÑ COORDENA√á√ÉO AUTOM√ÅTICA

O Darwin Omniscient Agent coordena automaticamente:
- Locks entre repos
- Sharing de dados
- Prioridades de recursos
- Mensagens entre agentes

Voc√™ s√≥ precisa executar o agent no in√≠cio da sess√£o!

---

## üìû PROBLEMAS COMUNS

**"Parameter estimation n√£o converge"**
- Verificar prior distributions
- Aumentar iterations (MCMC)
- Verificar dados experimentais (outliers?)

**"Simula√ß√£o muito lenta"**
- Usar GPU acceleration (set USE_GPU=true)
- Reduzir Monte Carlo samples
- Paralelizar no cluster

**"Drug release n√£o match experimental"**
- Revisar scaffold properties (kec-biomaterials)
- Verificar degradation kinetics
- Ajustar diffusion coefficients

---

**SIGA ESTAS REGRAS RIGOROSAMENTE!**

**√öltima atualiza√ß√£o:** 2025-11-06 15:40:00 -03
**Pr√≥xima revis√£o:** Ap√≥s feedback de uso

---

## üöÄ QUICK START

```bash
# 1. Carregar contexto
~/.darwin-global/darwin-omniscient-agent.sh

# 2. Ver estrutura
ls -la packages/

# 3. Rodar testes
pytest tests/ -v

# 4. Submeter simula√ß√£o
darwin-cluster submit --job analysis --script simulate_pbpk.py
```

